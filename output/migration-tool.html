<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
Licensed to the Apache Software Foundation (ASF) under one or more
contributor license agreements.  See the NOTICE file distributed with
this work for additional information regarding copyright ownership.
The ASF licenses this file to You under the Apache License, Version 2.0
(the "License"); you may not use this file except in compliance with
the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<html lang="en">
    <head>
        <META http-equiv="Content-Type" content="text/html;charset=UTF-8" />
        <link href="/styles/site.css" rel="stylesheet" type="text/css"/>
        <!-- <link href="/styles/type-settings.css" rel="stylesheet" type="text/css"/> -->
        <link href="/css/type-settings.css" rel="stylesheet" type="text/css"/>
        <LINK rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
        <META name="Description" content="Apache OpenJPA -- Migration Tool" />
        <META name="Keywords" content="Apache OpenJPA, JPA, JPA 1.0, JSR-220, JPA2, JPA 2.0, JSR-317, " />
        <META name="Owner" content="dev@openjpa.apache.org" />
        <META name="Robots" content="index, follow" />
        <META name="Security" content="Public" />
        <META name="Source" content="wiki template" />
        <META name="DC.Date" scheme="iso8601" content="2010-08-11" />
        <META name="DC.Language" scheme="rfc1766" content="en" />
        <META name="DC.Rights" content="Copyright Â© 2006,2025 The Apache Software Foundation" />
        <META http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))'/>
	<style>
.headerlink {
  visibility: hidden;
}
dt:hover > .headerlink, p:hover > .headerlink, td:hover > .headerlink, h1:hover > .headerlink, h2:hover > .headerlink, h3:hover > .headerlink, h4:hover > .headerlink, h5:hover > .headerlink, h6:hover > .headerlink {
  visibility: visible
}	</style>
        <title>Apache OpenJPA -- Migration Tool</title>
    </head>
    <body>
        <div class="white_box">
            <div class="header">
                <div class="header_l">
                    <div class="header_r">
                    </div>
                </div>
            </div>
            <div class="content">
                <div class="content_l">
                    <div class="content_r">
                        <div>
                            <!-- Banner -->
                            <TABLE valign="top" border="0" cellspacing="0" cellpadding="5" width="100%" background="images/header-bg3.png">
                                <TR>
                                    <TD valing="top" align="left">
                                        <A href="https://openjpa.apache.org/"><IMG src="/images/openjpa-logo.png" border="0" alt="OpenJPA Logo"></A>
                                    </TD>
                                    <TD width="100%">
                                        &nbsp;
                                    </TD>
                                    <TD valing="top" align="right">
                                        <A href="https://www.apache.org/"><IMG src="/images/asf_logo_wide2.png" border="0" alt="ASF Logo"></A>
                                    </TD>
                                </TR>
                            </TABLE>

                            <!-- Navigation Bar -->
                            <div class="bottom_red_bar">
                                <div id="site-breadcrumbs">
                                </div>
                            </div>

                            <!-- Content -->
                            <table border="0">
                                <tbody>
                                    <tr>
                                        <td valign="top">
                                            <div class="navigation">
                                                <div class="navigation_top">
                                                    <div class="navigation_bottom">
                                                        <!-- NavigationBar -->
                                                        <h3><a name="SideNav-Overview"></a><a href="/overview.html" title="Overview">Overview</a></h3>

                                                        <ul class="alternate" type="square">
                                                            <li><a href="/quick-start.html" title="Quick Start">Quick Start</a></li>
                                                            <li><a href="/downloads.html" title="Downloads">Downloads</a></li>
                                                            <li><a href="/documentation.html" title="Documentation">Documentation</a></li>
                                                            <li><a href="/site-index.html" title="Site Index">Site Index</a></li>
                                                            <li><a href="/license.html" title="License">License</a></li>
                                                            <li><a href="/privacy-policy.html" title="Privacy Policy">Privacy Policy</a></li>
                                                        </ul>

                                                        <h3><a name="SideNav-Community"></a><a href="/community.html" title="Community">Community</a></h3>

                                                        <ul class="alternate" type="square">
                                                            <li><a href="/index.html#Index-eventsandnews" title="Events and News">Events and News</a></li>
                                                            <li><a href="/found-a-bug.html" title="Found a Bug">Found a Bug</a>?</li>
                                                            <li><a href="/get-involved.html" title="Get Involved">Get Involved</a></li>
                                                            <li><a href="/mailing-lists.html" title="Mailing Lists">Mailing Lists</a></li>
                                                            <li><a href="/committers.html" title="Committers">Committers</a></li>
                                                            <li><a href="/integration.html" title="Integration">Integration</a></li>
                                                            <li><a href="/powered-by.html" title="Powered By">Powered By</a></li>
                                                            <li><a href="/thanks.html" title="Thanks">Thanks</a></li>
                                                        </ul>


                                                        <h3><a name="SideNav-Development"></a><a href="/development.html" title="Development">Development</a></h3>

                                                        <ul class="alternate" type="square">
                                                            <li><a href="/downloads-nightly.html" title="Downloads">Nightly Downloads</a></li>                                        
                                                            <li><a href="/source-code.html" title="Source Code">Source Code</a></li>
                                                            <li><a href="/testing.html" title="Testing">Testing</a></li>
                                                            <li><a href="https://issues.apache.org/jira/browse/OPENJPA" class="external-link" rel="nofollow">Issue Tracker</a></li>
                                                            <li><a href="/tools.html" title="Tools">Tools</a></li>
                                                            <li><a href="/samples.html" title="Samples">Samples</a></li>
                                                            <li><a href="/release-management.html" title="Release Management">Release Management</a></li>
                                                        </ul>

                                                        <h3><a name="SideNav-Consumers"></a><a href="/consumers.html" title="Consumers">Consumers</a></h3>

                                                        <ul class="alternate" type="square">
                                                            <li><a href="/tips-n-techniques.html" title="Tips and Techniques">Tips and Techniques</a></li>
                                                            <li><a href="/troubleshoot.html" title="Trouble Shoot">Trouble Shoot</a></li>
                                                        </ul>

                                                        <h3>Search</h3>

                                                        <div style="padding: 5px 5px 0px 25px;">
                                                            <form action="https://www.google.com/search" method="get" style="font-size: 10px;">
                                                                <input name="ie" type="hidden" value="UTF-8">
                                                                <input name="oe" type="hidden" value="UTF-8">
                                                                <input maxlength="255" name="q" size="15" type="text" value=""><br><br>
                                                                <input name="btnG" type="submit" value="Google">
                                                                <input name="domains" type="hidden" value="openjpa.apache.org">
                                                                <input name="sitesearch" type="hidden" value="openjpa.apache.org">
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td valign="top" width="100%" style="overflow:hidden;">
                                            <div class="wiki-content">
    <p><a name="MigrationTool-MigrationTool"></a></p>
<h1 id="migration-tool">Migration Tool<a class="headerlink" href="#migration-tool" title="Permalink">&para;</a></h1>
<p>This command-line utility translates proprietary mapping descriptors to
standard JPA mapping descriptors.</p>
<p><a name="MigrationTool-Download"></a></p>
<h2 id="download">Download<a class="headerlink" href="#download" title="Permalink">&para;</a></h2>
<p>The latest OpenJPA Tools JAR file can be download from the <a href="https://repository.apache.org/content/repositories/snapshots/org/apache/openjpa/tools/openjpa-tools/0.1.0-SNAPSHOT/">SNAPSHOT Repository</a>
or can be built from the source code in <a href="https://svn.apache.org/repos/asf/openjpa/tools/trunk">svn</a>
by using Maven 2.2.1 and Java SE 6.</p>
<p><a name="MigrationTool-Usage:"></a></p>
<h2 id="usage">Usage:<a class="headerlink" href="#usage" title="Permalink">&para;</a></h2>
<pre><code>  $ java org.apache.openjpa.tools.MigrationTool -input xyz.xml [-output xyz.orm.xml] [-actions migration-actions.xml]  [-verbose true]
</code></pre>
<p>where</p>
<table>
<tr>
<td class="border">-input </td>
<td class="border"> input location of the proprietary XML mapping descriptor
resource. The resource is looked up in the current classpath. If not
located as a resource, then looked up as an input file in relative to the
current directory. This option is mandatory
</td>
</tr>
<tr>
<td class="border">-output</td>
<td class="border"> output location of the translated mapping descriptor file. This
option is not mandatory. If unspecified, the output is simply printed on
the standard console. 
</td>
</tr>
<tr><td class="border">-actions</td>
<td class="border"> the actions to be performed on every element of the input
descriptor elements. These actions are specified as XML elements compliant
to a <a class="external-link" href="http://fisheye6.atlassian.com/browse/openjpa/tools/trunk/openjpa-tools/src/main/resources/META-INF/migration-actions.xsd?r=HEAD" rel="nofollow">XML schema</a>. A template of these actions for a _subset_ of Hibernate elements is
included in <a class="external-link" href="http://fisheye6.atlassian.com/browse/openjpa/tools/trunk/openjpa-tools/src/main/resources/META-INF/migration-actions.xml?r=HEAD" rel="nofollow">migration-actions.xml</a>. 
This option is not mandatory. The archetype for translating Hibernate
mapping descriptor is used as a default.
</td>
</tr>
<tr><td class="border">-verbose</td><td class="border">prints detailed trace of what the tool is doing. This option is
not mandatory. If unspecified,	detailed messages are not printed.</td></tr>
</table>
<p><a name="MigrationTool-Discussion"></a></p>
<h2 id="discussion">Discussion<a class="headerlink" href="#discussion" title="Permalink">&para;</a></h2>
<p>This tool takes each top-level element of the input mapping descriptor and
applies one or more actions to translate it to a standard JPA mapping
descriptor.
For example, consider the input fragment</p>
<pre><code>&lt;class name="com.approuter.deploy.Project" table="PROJECTS" select-before-update="false"&gt;
  &lt;id name="id" type="java.lang.Long" column="ID"&gt;
	&lt;generator class="native" /&gt;
  &lt;/id&gt;
&lt;/class&gt;
</code></pre>
<p>This fragment will be translated by the tool as follows:</p>
<pre><code>&lt;entity class="com.approuter.deploy.Project"&gt;
    &lt;table name="PROJECTS"/&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
	     &lt;column name="ID"/&gt;
	     &lt;generated-value strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
&lt;/entity&gt;
</code></pre>
<p>The series of actions that translated this fragments are as follows:</p>
<ul>
<li>The input element <em><class></class></em> is translated to <em><entity></entity></em> element.</li>
<li>The <em>name</em> attribute of input element <em><class></class></em> is translated to <em>class</em> attribute. The value of the attribute remained intact.</li>
<li>the <em>table</em> attribute of input element <em><class></class></em> is translated to a new element <em><table></table></em>. The value of the <em>table</em> attribute appeared as <em>name</em> attribute in the translated element.</li>
<li>the attribute <em>select-before-update</em> is ignored as it does not have a direct counterpart in standard JPA mapping descriptor. Actually this attribute controls runtime behavior and it is debatable whether a mapping descriptor is the proper place for such an attribute.</li>
<li>a new element <em><attributes></attributes></em> appeared in the translated document which had no equivalent counterpart in the original document.</li>
<li>the <em>column</em> attribute of input element <em><id></id></em> is translated to a new element <em><column></column></em>. The value of the <em>column</em> attribute appeared as <em>name</em> attribute in the translated element.</li>
<li>the input element <em><generator></generator></em> is translated to <em><generated-value></generated-value></em> element.</li>
<li>the <em>class</em> attribute of input element <em><generator></generator></em> is translated to a <em>strategy</em> attribute. The value of the attribute is translated from <em>native</em> to <em>AUTO</em>.</li>
</ul>
<p>The translation was carried out by a series of <em>generic</em>, <em>parameterized</em> <em>actions</em>. The actions are specified in <a href="http://fisheye6.atlassian.com/browse/openjpa/tools/trunk/openjpa-tools/src/main/resources/META-INF/migration-actions.xml?r=HEAD">migration-actions.xml</a>. Here is a snippet from that archetype to define those generic actions and their parameters.</p>
<pre><code>&lt;actions for="class"&gt;
	&lt;rename-node to="entity"/&gt;
	&lt;rename-attr from="name" to="class"/&gt;
	&lt;promote-attr from="table" to="table" as="name"/&gt;
	&lt;ignore-attr name="select-before-update"/&gt;
	&lt;ignore-attr name="type"/&gt;
	&lt;insert-node name="attributes"/&gt;
&lt;/actions&gt;
&lt;actions for="id"&gt;
    &lt;rename-node to="id"/&gt;
    &lt;rename-attr from="name" to="name"/&gt;
    &lt;promote-attr from="column" to="column" as="name"&gt;
		&lt;consume-attr from="length" to="length"/&gt;
		&lt;consume-attr from="unique" to="unique"/&gt;
    &lt;/promote-attr&gt;
    &lt;ignore-attr name="type"/&gt;
&lt;/actions&gt;
&lt;actions for="generator"&gt;
    &lt;rename-node to="generated-value"/&gt;
    &lt;rename-attr from="class" to="strategy"&gt;
		&lt;map-value from="native"   to="AUTO"/&gt;
		&lt;map-value from="assigned" to="IDENTITY"/&gt;
     &lt;/rename-attr&gt;
&lt;/actions&gt;
</code></pre>
<p>The schema that specifies what actions are supported and their parameters are defined in a <a href="http://fisheye6.atlassian.com/browse/openjpa/tools/trunk/openjpa-tools/src/main/resources/META-INF/migration-actions.xsd?r=HEAD">XML schema</a>.</p>
<span class="info">
   This tool is at experimental stage of development and does not cater to
all possible variations that such a translation may require. However, that
is why the design allows new custom actions be defined and applied to cater
to more complex use cases. 
</span>

                                            </div>
                                        </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <div class="bottom_red_bar"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="black_box">
                    <div class="footer">
                        <div class="footer_l">
                            <div class="footer_r">
                                <div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="design_attribution">
                Copyright &copy; 2006,2025 The Apache Software Foundation. Licensed under <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a>.<br />
                Apache, the Apache feather logo and OpenJPA are trademarks of The Apache Software Foundation.<br />
                Other names may be trademarks of their respective owners.<br />
            </div>
    </body>
</html>